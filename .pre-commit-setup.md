# Pre-commit Hooks Setup

This project uses pre-commit hooks to ensure code quality before commits.

## Initial Setup

```bash
# Install pre-commit (if not already installed)
pip install pre-commit

# Install the git hooks
pre-commit install

# Optional: Install hooks for commit messages
pre-commit install --hook-type commit-msg
```

## Usage

### Automatic (Recommended)

Once installed, pre-commit hooks run automatically on `git commit`. If any check fails, the commit is aborted and you'll see what needs to be fixed.

### Manual Run

```bash
# Run on all files
pre-commit run --all-files

# Run on staged files only
pre-commit run

# Run a specific hook
pre-commit run ruff --all-files
pre-commit run black --all-files
pre-commit run mypy --all-files
```

### Update Hooks

```bash
# Update all hooks to latest versions
pre-commit autoupdate
```

## What Gets Checked

1. **ruff**: Linting and code quality (matches CI exactly)
2. **black**: Code formatting (matches CI exactly)
3. **mypy**: Type checking (matches CI exactly)
4. **pre-commit-hooks**: Basic file checks (trailing whitespace, file endings, etc.)

## Version Pinning

All tool versions are pinned to ensure consistency between local development and CI:

- `ruff`: 0.6.x (supports modern configuration format)
- `black`: 24.3.x
- `mypy`: 1.9.x

These versions are compatible with the CI environment and provide the best balance of features and stability.

## Troubleshooting

### Skip hooks temporarily

```bash
# Skip all hooks for one commit (not recommended)
git commit --no-verify

# Skip specific hooks
SKIP=mypy git commit
```

### Clear cache

```bash
pre-commit clean
```

### Reinstall hooks

```bash
pre-commit uninstall
pre-commit install
```
